<!--
  ~ Copyright (C) 2010 Brockmann Consult GmbH (info@brockmann-consult.de)
  ~
  ~ This program is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU General Public License as published by the Free
  ~ Software Foundation; either version 3 of the License, or (at your option)
  ~ any later version.
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
  ~ more details.
  ~
  ~ You should have received a copy of the GNU General Public License along
  ~ with this program; if not, see http://www.gnu.org/licenses/
  -->

<html>
<head>
    <title>SNAP Data Processors - Idepix Proba-V Processor Description</title>
    <link rel="stylesheet" href="../style.css">
</head>

<body>

<table class="header">
    <tr class="header">
        <td class="header">&nbsp;
            SNAP Data Processors - Idepix Proba-V Processor Description
        </td>
        <td class="header" align="right"><a href="nbdocs://org.esa.snap.snap.help/org/esa/snap/snap/help/docs/general/overview/SnapOverview.html"><img src="../images/snap_header.jpg"
                                                                                                                                                       border=0></a>
        </td>
    </tr>
</table>

<h3>Processor Description</h3>

<h4>I/O Parameters Tab</h4>

<p align="center"><img src="images/ProbavPaths.png"></p>

<h5>Source Product Group</h5>

<p class="i1">
    <b>Name: </b>
    Used to select the spectral source product. The source product shall
    contain spectral bands providing a source spectrum at each pixel. Use the <b>...</b> button to
    open a data product currently not opened in the Sentinel Toolbox.
</p>

<h5>Supported Proba-V Source Products</h5>
The following Proba-V source products are supported for Idepix classification:
<ul>
    <li>
        PROBAV_L1C_*:<br>
        PROBAV L1C TOA products.
    </li>
    <li>
        PROBAV_S1_TOA_*:<br>
        PROBAV L1 TOA 1-day Synthesis products.
    </li>
    <li>
        PROBAV_S10_TOA_*:<br>
        PROBAV L1 TOA 10-day Synthesis products.
    </li>
</ul>
For more details on these products and file name conventions
see the User  Guide  of  the  PROBA-V  data
(http://proba-v.vgt.vito.be/files/Product_User_Manual.pdf)

<h5>Target Product Group</h5>

<p class="i1">
    <b>Name:</b>
    Used to specify the name of the target product.
</p>

<p class="i1">
    <b>Save to:</b>
    Used to specify whether the target product should be saved to the file system. The
    combo box presents a list of file formats.
</p>

<p class="i1">
    <b>Open in SNAP:</b>
    Used to specify whether the target product should be opened in the Sentinel Toolbox.
    When the target product is not saved, it is opened in the Sentinel Toolbox automatically.
</p>

<h3>The Processing Parameters</h3>

<p align="center"><img src="images/VgtParameters.png"></p>

<p class="i1">
    <b>Write TOA reflectances to the target product: </b><br>
    If set, all TOA reflectance bands from the source product are written to target product.
    The default value is 'false'.
</p>

<p class="i1">
    <b>Write input annotation bands to the target product: </b><br>
    If set, all annotation bands from the source product are written to target product.
    The default value is 'false'.
</p>

<p class="i1">
    <b> Write feature values to the target product: </b><br>
    If set, various feature values computed for the final pixel classification are written to target product.
    See algorthm description for more details. The default value is 'false'.
</p>

<p class="i1">
    <b> Apply NN for cloud classification: </b><br>
    If set, a neural network is considered for cloud classification instead of the feature value approach.
    See algorithm description for more details.
    The default value is 'false'.
</p>

<p class="i1">
    <b>NN cloud ambiguous lower boundary: </b><br>
    The boundary of the neural network output value where pixels are regarded as either clear (NN output lower
    than boundary) or 'cloud ambiguous' (NN output higher than boundary).
    Providing the NN cloud ambiguous lower boundary as user option allows a fine tuning of the pixel classification
    under certain conditions. The default value is 1.1.
</p>

<p class="i1">
    <b>NN cloud ambiguous/sure separation value: </b><br>
    The boundary of the neural network output value where pixels are regarded as either 'cloud ambiguous' (NN output
    lower
    than boundary) or 'cloud sure' (NN output higher than boundary).
    Providing the NN cloud ambiguous/sure separation value as user option allows a fine tuning of the pixel
    classification
    under certain conditions. The default value is 2.7.
</p>

<p class="i1">
    <b>NN cloud sure/snow separation value: </b><br>
    The boundary of the neural network output value where pixels are regarded as either 'cloud sure' (NN output lower
    than boundary) or 'snow' (NN output higher than boundary).
    Providing the NN cloud sure / snow separation value as user option allows a fine tuning of the pixel classification
    under certain conditions. The default value is 4.6.
</p>

<p class="i1">
    <b>Compute a cloud buffer: </b><br>
    If set, a cloud buffer of certain width is computed around pixels classified as 'cloud sure'.
    The default value is 'true'.
</p>

<p class="i1">
    <b>Width of cloud buffer (# of pixels): </b><br>
    If a cloud buffer is computed, the buffer width (in # of pixels around the cloudy reference pixel) can be specified.
    The default value is '2'.
</p>

<p class="i1">
    <b>Use land-water flag from L1 product instead: </b><br>
    If set, the land-water flag from the L1 source product is used instead of the SRTM-based mask.
    The default value is 'false'.
</p>

<h3>The Processing Result</h3>
The Idepix classification result is written into the target product as a flag band named 'pixel_classif_flags'.
This band holds integer values which for PROBA-V follow the flag coding shown below.

<p align="center">
    <img src="images/ProbavFlagCoding.png" border="0">
</p>
<br>

The target product also provides a corresponding flag mask to visualize the pixel classification through the
SNAP Mask Manager:

<p align="center">
    <img src="images/ProbavMaskManager.png" border="0">
</p>

<hr>
</body>
</html>